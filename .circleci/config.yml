version: 2.1

jobs:
    docker_bringup:
        docker:
            - image: pseudodesign/pseudo-oe-docker:latest
        resource_class: small
        steps:
            # Checkout code and submodules
            - checkout
            - run: git submodule update --init --recursive
            - run:
                name: Fetch Downloads
                command: |
                    export BITBAKEDIR=$(pwd)/sources/poky/bitbake
                    source sources/poky/eo-init-build-env celestial-pi0w-build
                    bitbake -c fetch core-image-base

workflows:
    pseudo-oe:
        jobs:
            - docker_bringup
